CREATE TABLE IF NOT EXISTS PlantTypes(
	Name VARCHAR PRIMARY KEY,
	Icon INTEGER,
	Color VARCHAR
	);

CREATE TABLE IF NOT EXISTS Images(
	Name VARCHAR PRIMARY KEY,
	Image BLOB
	);

CREATE TABLE IF NOT EXISTS Lands(
	Name VARCHAR PRIMARY KEY,
	ImageUri VARCHAR,
	Description TEXT,
    FOREIGN KEY(ImageUri) REFERENCES Images(Name)
	);

CREATE TABLE IF NOT EXISTS Plants(
	Id INTEGER primary key autoincrement,
    Land VARCHAR,
    PlantType VARCHAR,
    description TEXT,
	x FLOAT,
	y FLOAT,
    FOREIGN KEY(Land) REFERENCES Lands(Name) ON DELETE CASCADE,
    FOREIGN KEY(PlantType) REFERENCES PlantTypes(Name)
	);

CREATE TABLE IF NOT EXISTS TaskTypes(
	Name VARCHAR PRIMARY KEY,
	Description TEXT
	);

CREATE TABLE IF NOT EXISTS Priorities(
    Name VARCHAR,
    P_order INTEGER PRIMARY KEY,
    Color VARCHAR
    );

CREATE TABLE IF NOT EXISTS Tasks(
    Land VARCHAR NOT NULL,
	PlantIndex INTEGER,
    TaskType VARCHAR NOT NULL,
    Priority INTEGER NOT NULL,
	CreationDate LONG NOT NULL,
	ExpirationDate LONG,
	Completed BOOLEAN NOT NULL CHECK (Completed IN (0,1)),
	Observations TEXT,
	FOREIGN KEY(PlantIndex) REFERENCES Plants(Id) ON DELETE CASCADE,
    FOREIGN KEY(Land) REFERENCES Lands(Name) ON DELETE CASCADE,
    FOREIGN KEY(TaskType) REFERENCES TaskTypes(Name) ON DELETE CASCADE,
    FOREIGN KEY(Priority) REFERENCES Priorities(P_order)
	);

INSERT INTO 'Priorities' (Name, P_order, Color)
VALUES ('Alta',1,'#B71C1C'),('Media',3,'#1B5E20'),('Baixa',5,'#0D47A1');

INSERT INTO 'PlantTypes' (Name, Icon, Color)
VALUES ('Alfarrobeira',2131230872,'#4d2600'),('Amendoeira',2131230872,'#996633'),('Oliveira',2131230872,'#669900')
,('Figueira',2131230872,'#74258e'),('Medronheiro',2131230872,'#aa0316'),('Mato',2131230857,'#e2db00')
,('Pedras',2131230868,'#adadad');

INSERT INTO 'TaskTypes' (Name, Description)
VALUES ('Limpeza', ''),('Poda Simples', 'Cortar rebentos de baixo'),('Poda Completa', 'Cortar pernadas')
,('Lavrar', ''),('Valados', 'Manutenção'),('Apanhar', '')